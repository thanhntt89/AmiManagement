<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="MeasurementPointDataSet" targetNamespace="http://tempuri.org/MeasurementPointDataSet.xsd" xmlns:mstns="http://tempuri.org/MeasurementPointDataSet.xsd" xmlns="http://tempuri.org/MeasurementPointDataSet.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueryIdMpByMpCodeTableAdapter" GeneratorFunctionsComponentClassName="QueryIdMpByMpCodeTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" UserFunctionsComponentName="QueryIdMpByMpCodeTableAdapter" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Settings" AppSettingsPropertyName="AmiSystemConnectionString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="AmiSystemConnectionString (Settings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.OperationDTO.Properties.Settings.GlobalReference.Default.AmiSystemConnectionString" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="MeasurementPointInfoTableAdapter" GeneratorDataComponentClassName="MeasurementPointInfoTableAdapter" Name="MeasurementPointInfo" UserDataComponentName="MeasurementPointInfoTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByDcuId" GenerateMethods="Fill" GenerateShortCommands="false" GeneratorSourceName="FillByDcuId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="FillByDcuId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPointMeter.MeasurementPointMeterId, MeasurementPoint.Id AS MeasurementPointId, 
                         MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, DataConcentratorUnit.DcuId AS DcuCode, 
                         Meter.MeterId AS MeterCode, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, MeasurementPoint.Address AS MeasurementPointAddress, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.Type AS MeasurementPointType, Contract.Note AS Contract, 
                         MeasurementPoint.CreatedDate, MeasurementPoint.IsDeleted, maxdate.LastOperationTime, MeasurementPoint.EditedDate, 
                         DataConcentratorUnit.ConnectionStatus
FROM            MeasurementPoint FULL OUTER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId LEFT OUTER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id LEFT OUTER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id LEFT OUTER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id LEFT OUTER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id LEFT OUTER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id LEFT OUTER JOIN
                         Contract ON MeasurementPoint.TakeOverBill = Contract.Id LEFT OUTER JOIN
                             (SELECT        MeasurementPointMeterId, MAX(ServerTime) AS LastOperationTime
                               FROM            Operation3P
                               GROUP BY MeasurementPointMeterId) AS maxdate ON MeasurementPointMeter.MeasurementPointMeterId = maxdate.MeasurementPointMeterId
WHERE        (DataConcentratorUnit.Id = @dcuId)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="dcuId" ColumnName="Id" DataSourceName="" DataTypeServer="unknown" DbType="Object" Direction="Input" ParameterName="@dcuId" Precision="0" Scale="0" Size="1024" SourceColumn="MeasurementPointId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="MeasurementPointCode" DataSetColumn="MeasurementPointCode" />
              <Mapping SourceColumn="MeterStatus" DataSetColumn="MeterStatus" />
              <Mapping SourceColumn="MeasurementPointMeterStatus" DataSetColumn="MeasurementPointMeterStatus" />
              <Mapping SourceColumn="MeasurementPointName" DataSetColumn="MeasurementPointName" />
              <Mapping SourceColumn="MeterType" DataSetColumn="MeterType" />
              <Mapping SourceColumn="MeasurementPointGroupName" DataSetColumn="MeasurementPointGroupName" />
              <Mapping SourceColumn="IsDeleted" DataSetColumn="IsDeleted" />
              <Mapping SourceColumn="CreatedDate" DataSetColumn="CreatedDate" />
              <Mapping SourceColumn="DcuCode" DataSetColumn="DcuCode" />
              <Mapping SourceColumn="MeterCode" DataSetColumn="MeterCode" />
              <Mapping SourceColumn="MeasurementPointAddress" DataSetColumn="MeasurementPointAddress" />
              <Mapping SourceColumn="MeasurementPointType" DataSetColumn="MeasurementPointType" />
              <Mapping SourceColumn="Contract" DataSetColumn="Contract" />
              <Mapping SourceColumn="LastOperationTime" DataSetColumn="LastOperationTime" />
              <Mapping SourceColumn="MeasurementPointId" DataSetColumn="MeasurementPointId" />
              <Mapping SourceColumn="MeasurementPointMeterId" DataSetColumn="MeasurementPointMeterId" />
              <Mapping SourceColumn="EditedDate" DataSetColumn="EditedDate" />
              <Mapping SourceColumn="ConnectionStatus" DataSetColumn="ConnectionStatus" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByConditions" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByConditions" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="FillByConditions">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPointMeter.MeasurementPointMeterId, MeasurementPoint.Id AS MeasurementPointId, 
                         MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, DataConcentratorUnit.DcuId AS DcuCode, 
                         Meter.MeterId AS MeterCode, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, MeasurementPoint.Address AS MeasurementPointAddress, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.Type AS MeasurementPointType, Contract.Note AS Contract, 
                         MeasurementPoint.CreatedDate, MeasurementPoint.IsDeleted, maxdate.LastOperationTime, MeasurementPoint.EditedDate
FROM            MeasurementPoint FULL OUTER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId LEFT OUTER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id LEFT OUTER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id LEFT OUTER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id LEFT OUTER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id LEFT OUTER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id LEFT OUTER JOIN
                         Contract ON MeasurementPoint.TakeOverBill = Contract.Id LEFT OUTER JOIN
                             (SELECT        MeasurementPointMeterId, MAX(ServerTime) AS LastOperationTime
                               FROM            Operation3P
                               GROUP BY MeasurementPointMeterId) AS maxdate ON MeasurementPointMeter.MeasurementPointMeterId = maxdate.MeasurementPointMeterId
WHERE        (MeasurementPoint.Id IS NOT NULL) AND (@mpCode IS NULL OR
                         MeasurementPoint.MeasurementPointId LIKE '%' + @mpCode) AND (@dcucode IS NULL OR
                         DataConcentratorUnit.DcuId LIKE '%' + @dcucode) AND (@meterCode IS NULL OR
                         Meter.MeterId LIKE '%' + @meterCode) AND (@groupId IS NULL OR
                         MeasurementPointGroup.Id = @groupId) AND (@contractId IS NULL OR
                         Contract.Id = @contractId) AND (@mptype IS NULL OR
                         MeasurementPoint.Type = @mptype) AND (@isDeleted IS NULL OR
                         MeasurementPoint.IsDeleted = @isDeleted) AND (@createdFrom IS NULL OR
                         CAST(MeasurementPoint.CreatedDate AS date) &gt; CAST(DATEADD(DAY, - 1, @createdFrom) AS date)) AND (@createdTo IS NULL OR
                         CAST(MeasurementPoint.CreatedDate AS date) &lt; CAST(DATEADD(DAY, 1, @createdTo) AS date))
ORDER BY MeasurementPoint.CreatedDate DESC</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="mpCode" ColumnName="MeasurementPointId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@mpCode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeasurementPointCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="dcucode" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@dcucode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="DcuCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="meterCode" ColumnName="MeterId" DataSourceName="AmiSystem.dbo.Meter" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@meterCode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeterCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="groupId" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPointGroup" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@groupId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="contractId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Contract" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@contractId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="mptype" ColumnName="Type" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="int" DbType="AnsiString" Direction="Input" ParameterName="@mptype" Precision="0" ProviderType="VarChar" Scale="0" Size="4" SourceColumn="MeasurementPointType" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="isDeleted" ColumnName="IsDeleted" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bit" DbType="AnsiString" Direction="Input" ParameterName="@isDeleted" Precision="0" ProviderType="VarChar" Scale="0" Size="1" SourceColumn="IsDeleted" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="createdFrom" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@createdFrom" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="createdTo" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@createdTo" Precision="0" Scale="0" Size="1024" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByConditionsWithOrgId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByConditionsWithOrgId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy1" UserSourceName="FillByConditionsWithOrgId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT    MeasurementPointMeter.MeasurementPointMeterId, MeasurementPoint.Id AS MeasurementPointId, 
                         MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, DataConcentratorUnit.DcuId AS DcuCode, 
                         Meter.MeterId AS MeterCode, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, MeasurementPoint.Address AS MeasurementPointAddress, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.Type AS MeasurementPointType, Contract.Note AS Contract, 
                         MeasurementPoint.CreatedDate, MeasurementPoint.IsDeleted, maxdate.LastOperationTime, MeasurementPoint.EditedDate,DataConcentratorUnit.ConnectionStatus
FROM            MeasurementPoint FULL OUTER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId LEFT OUTER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id LEFT OUTER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id LEFT OUTER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id LEFT OUTER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id LEFT OUTER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id LEFT OUTER JOIN																	
                         Contract ON MeasurementPoint.TakeOverBill = Contract.Id
						
						  LEFT OUTER JOIN
                             (SELECT        MeasurementPointMeterId, MAX(ServerTime) AS LastOperationTime
                               FROM            Operation3P
                               GROUP BY MeasurementPointMeterId) AS maxdate ON MeasurementPointMeter.MeasurementPointMeterId = maxdate.MeasurementPointMeterId
WHERE        (MeasurementPoint.Id IS NOT NULL) 
AND (@mpCode IS NULL OR
                         MeasurementPoint.MeasurementPointId LIKE '%' + @mpCode) 
						 AND (@dcucode IS NULL OR
                         DataConcentratorUnit.DcuId LIKE '%' + @dcucode) 
						 AND (@meterCode IS NULL OR
                         Meter.MeterId LIKE '%' + @meterCode) 						
						 AND (@contractId IS NULL OR
                         Contract.Id = @contractId) 
						 AND (@mptype IS NULL OR
                         MeasurementPoint.Type = @mptype) 
						 AND (@isDeleted IS NULL OR
                         MeasurementPoint.IsDeleted = @isDeleted) 
						 AND (@orgId is null or MeasurementPointGroup.OrgId in (
							 SELECT ID
							 FROM [Organization]
							 WHERE ID = @orgId
							 UNION
							 SELECT ID
							 FROM [Organization]
							 WHERE ParentID = @orgId
							 UNION ALL
							 SELECT d.ID
							 FROM [Organization] as d
								INNER JOIN 
								 (  SELECT ID, Name
									FROM [Organization] WHERE ParentID = @orgId
								 )parent 
								   ON d.ParentID = parent.ID
								)
						 )
						 AND (@mpGroupId is null or MeasurementPoint.MeasurementPointGroupId = @mpGroupId)
						 AND (@createdFrom IS NULL OR
                         CAST(MeasurementPoint.CreatedDate AS date) &gt; CAST(DATEADD(DAY, - 1, @createdFrom) AS date)) 
						 AND (@createdTo IS NULL OR
                         CAST(MeasurementPoint.CreatedDate AS date) &lt; CAST(DATEADD(DAY, 1, @createdTo) AS date))					 
						ORDER BY MeasurementPoint.CreatedDate DESC</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="mpCode" ColumnName="MeasurementPointId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@mpCode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeasurementPointCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="dcucode" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@dcucode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="DcuCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="meterCode" ColumnName="MeterId" DataSourceName="AmiSystem.dbo.Meter" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@meterCode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeterCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="contractId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Contract" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@contractId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="mptype" ColumnName="Type" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="int" DbType="AnsiString" Direction="Input" ParameterName="@mptype" Precision="0" ProviderType="VarChar" Scale="0" Size="4" SourceColumn="MeasurementPointType" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="isDeleted" ColumnName="IsDeleted" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bit" DbType="AnsiString" Direction="Input" ParameterName="@isDeleted" Precision="0" ProviderType="VarChar" Scale="0" Size="1" SourceColumn="IsDeleted" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="createdFrom" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@createdFrom" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="createdTo" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@createdTo" Precision="0" Scale="0" Size="1024" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="orgId" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@orgId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="mpGroupId" ColumnName="MeasurementPointGroupId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@mpGroupId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="MeasurementPointGroupId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByCustomerId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByCustomerId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy2" UserSourceName="FillByCustomerId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPoint.Id AS MeasurementPointId, MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, 
                         DataConcentratorUnit.DcuId, Meter.MeterId, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, Customer.CustomerId, Customer.Name AS CustomerName, Customer.Address, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.IsDeleted
FROM            MeasurementPoint INNER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId INNER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id INNER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id INNER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id INNER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id INNER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id
WHERE        (Customer.Id = @CustomerId)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="CustomerId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Customer" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@CustomerId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByDcuCode" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByDcuCode" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy3" UserSourceName="FillByDcuCode">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPoint.Id AS MeasurementPointId, MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, 
                         DataConcentratorUnit.DcuId, Meter.MeterId, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, Customer.CustomerId, Customer.Name AS CustomerName, Customer.Address, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName
FROM            MeasurementPoint INNER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId INNER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id INNER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id INNER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id INNER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id INNER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id
WHERE        (DataConcentratorUnit.DcuId LIKE '%' + @DcuCode + '%')</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="DcuCode" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@DcuCode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByMeasurementPointId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByMeasurementPointId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy4" UserSourceName="FillByMeasurementPointId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPointMeter.MeasurementPointMeterId, MeasurementPoint.Id AS MeasurementPointId, 
                         MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, DataConcentratorUnit.DcuId AS DcuCode, 
                         Meter.MeterId AS MeterCode, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, MeasurementPoint.Address AS MeasurementPointAddress, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.Type AS MeasurementPointType, Contract.Note AS Contract, 
                         MeasurementPoint.CreatedDate, MeasurementPoint.IsDeleted, maxdate.LastOperationTime
FROM            MeasurementPoint FULL OUTER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId LEFT OUTER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id LEFT OUTER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id LEFT OUTER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id LEFT OUTER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id LEFT OUTER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id LEFT OUTER JOIN
                         Contract ON MeasurementPoint.TakeOverBill = Contract.Id LEFT OUTER JOIN
                             (SELECT        MeasurementPointMeterId, MAX(ServerTime) AS LastOperationTime
                               FROM            Operation3P
                               GROUP BY MeasurementPointMeterId) AS maxdate ON MeasurementPointMeter.MeasurementPointMeterId = maxdate.MeasurementPointMeterId
WHERE        (MeasurementPoint.Id = @MeasurementPointId)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="MeasurementPointId" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@MeasurementPointId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="MeasurementPointId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByMeterId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByMeterId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy5" UserSourceName="FillByMeterId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        MeasurementPointMeter.MeasurementPointMeterId, MeasurementPoint.Id AS MeasurementPointId, 
                         MeasurementPoint.MeasurementPointId AS MeasurementPointCode, MeterType.Name AS MeterType, DataConcentratorUnit.DcuId AS DcuCode, 
                         Meter.MeterId AS MeterCode, Meter.Status AS MeterStatus, MeasurementPointMeter.Status AS MeasurementPointMeterStatus, 
                         MeasurementPoint.Name AS MeasurementPointName, MeasurementPoint.Address AS MeasurementPointAddress, 
                         MeasurementPointGroup.Name AS MeasurementPointGroupName, MeasurementPoint.Type AS MeasurementPointType, Contract.Note AS Contract, 
                         MeasurementPoint.CreatedDate, MeasurementPoint.IsDeleted, maxdate.LastOperationTime, MeasurementPoint.EditedDate, 
                         DataConcentratorUnit.ConnectionStatus
FROM            MeasurementPoint FULL OUTER JOIN
                         MeasurementPointMeter ON MeasurementPoint.Id = MeasurementPointMeter.MeasurementPointId LEFT OUTER JOIN
                         MeterType ON MeasurementPoint.MeterTypeId = MeterType.Id LEFT OUTER JOIN
                         DataConcentratorUnit ON MeasurementPoint.DcuId = DataConcentratorUnit.Id LEFT OUTER JOIN
                         Meter ON MeasurementPointMeter.MeterId = Meter.Id LEFT OUTER JOIN
                         Customer ON MeasurementPointMeter.CustomerId = Customer.Id LEFT OUTER JOIN
                         MeasurementPointGroup ON MeasurementPoint.MeasurementPointGroupId = MeasurementPointGroup.Id LEFT OUTER JOIN
                         Contract ON MeasurementPoint.TakeOverBill = Contract.Id LEFT OUTER JOIN
                             (SELECT        MeasurementPointMeterId, MAX(ServerTime) AS LastOperationTime
                               FROM            Operation3P
                               GROUP BY MeasurementPointMeterId) AS maxdate ON MeasurementPointMeter.MeasurementPointMeterId = maxdate.MeasurementPointMeterId
   where Meter.Id =@meterId</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="meterId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Meter" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@meterId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="MeasurementPointTableAdapter" GeneratorDataComponentClassName="MeasurementPointTableAdapter" Name="MeasurementPoint" UserDataComponentName="MeasurementPointTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectName="AmiSystem.dbo.MeasurementPoint" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="true" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetData" UserSourceName="Fill">
                <DeleteCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>DELETE FROM MeasurementPoint
WHERE        (Id = @Original_Id)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="Original_Id" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@Original_Id" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Original" />
                    </Parameters>
                  </DbCommand>
                </DeleteCommand>
                <InsertCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="false">
                    <CommandText>INSERT INTO [dbo].[MeasurementPoint] ([MeasurementPointId], [MeterTypeId], [MeasurementPointGroupId], [DcuId], [Type], [Status], [StartUpdateTime], [PhaseType], [Name], [Note], [Address], [TURatio], [TIRatio], [Mutilplier], [LaunchDay], [SettlementDate], [SettlementUser], [CreatedUserId], [CreatedDate], [EditedUserId], [EditedDate], [IsDeleted], [Lat], [Long], [TakeOver], [TakeOverDate], [TakeOverUser], [TakeOverBill]) VALUES (@MeasurementPointId, @MeterTypeId, @MeasurementPointGroupId, @DcuId, @Type, @Status, @StartUpdateTime, @PhaseType, @Name, @Note, @Address, @TURatio, @TIRatio, @Mutilplier, @LaunchDay, @SettlementDate, @SettlementUser, @CreatedUserId, @CreatedDate, @EditedUserId, @EditedDate, @IsDeleted, @Lat, @Long, @TakeOver, @TakeOverDate, @TakeOverUser, @TakeOverBill);
SELECT Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, StartUpdateTime, PhaseType, Name, Note, Address, TURatio, TIRatio, Mutilplier, LaunchDay, SettlementDate, SettlementUser, CreatedUserId, CreatedDate, EditedUserId, EditedDate, IsDeleted, Lat, Long, TakeOver, TakeOverDate, TakeOverUser, TakeOverBill FROM MeasurementPoint WHERE (Id = SCOPE_IDENTITY())</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="AnsiString" Direction="Input" ParameterName="@MeasurementPointId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="MeasurementPointId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Int64" Direction="Input" ParameterName="@MeterTypeId" Precision="0" ProviderType="BigInt" Scale="0" Size="0" SourceColumn="MeterTypeId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="Int64" Direction="Input" ParameterName="@MeasurementPointGroupId" Precision="0" ProviderType="BigInt" Scale="0" Size="0" SourceColumn="MeasurementPointGroupId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Int64" Direction="Input" ParameterName="@DcuId" Precision="0" ProviderType="BigInt" Scale="0" Size="0" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="Int32" Direction="Input" ParameterName="@Type" Precision="0" ProviderType="Int" Scale="0" Size="0" SourceColumn="Type" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="AnsiString" Direction="Input" ParameterName="@Status" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="Status" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@StartUpdateTime" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="StartUpdateTime" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="Int32" Direction="Input" ParameterName="@PhaseType" Precision="0" ProviderType="Int" Scale="0" Size="0" SourceColumn="PhaseType" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="@Name" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumn="Name" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="@Note" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumn="Note" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="@Address" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumn="Address" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Decimal" Direction="Input" ParameterName="@TURatio" Precision="10" ProviderType="Decimal" Scale="0" Size="0" SourceColumn="TURatio" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Decimal" Direction="Input" ParameterName="@TIRatio" Precision="10" ProviderType="Decimal" Scale="0" Size="0" SourceColumn="TIRatio" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Decimal" Direction="Input" ParameterName="@Mutilplier" Precision="10" ProviderType="Decimal" Scale="0" Size="0" SourceColumn="Mutilplier" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@LaunchDay" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="LaunchDay" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@SettlementDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="SettlementDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="@SettlementUser" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumn="SettlementUser" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="AnsiString" Direction="Input" ParameterName="@CreatedUserId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="CreatedUserId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@CreatedDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="CreatedDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="AnsiString" Direction="Input" ParameterName="@EditedUserId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="EditedUserId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@EditedDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="EditedDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="Boolean" Direction="Input" ParameterName="@IsDeleted" Precision="0" ProviderType="Bit" Scale="0" Size="0" SourceColumn="IsDeleted" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="StringFixedLength" Direction="Input" ParameterName="@Lat" Precision="0" ProviderType="NChar" Scale="0" Size="0" SourceColumn="Lat" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="StringFixedLength" Direction="Input" ParameterName="@Long" Precision="0" ProviderType="NChar" Scale="0" Size="0" SourceColumn="Long" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Int32" Direction="Input" ParameterName="@TakeOver" Precision="0" ProviderType="Int" Scale="0" Size="0" SourceColumn="TakeOver" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="@TakeOverDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumn="TakeOverDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="@TakeOverUser" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumn="TakeOverUser" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="" DataSourceName="" DbType="Int64" Direction="Input" ParameterName="@TakeOverBill" Precision="0" ProviderType="BigInt" Scale="0" Size="0" SourceColumn="TakeOverBill" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </InsertCommand>
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="false">
                    <CommandText>SELECT Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, StartUpdateTime, PhaseType, Name, Note, Address, TURatio, TIRatio, Mutilplier, LaunchDay, SettlementDate, SettlementUser, CreatedUserId, CreatedDate, EditedUserId, EditedDate, IsDeleted, Lat, Long, TakeOver, TakeOverDate, TakeOverUser, TakeOverBill FROM dbo.MeasurementPoint</CommandText>
                    <Parameters />
                  </DbCommand>
                </SelectCommand>
                <UpdateCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>UPDATE       MeasurementPoint
SET                MeasurementPointId = @MeasurementPointId, MeterTypeId = @MeterTypeId, MeasurementPointGroupId = @MeasurementPointGroupId, DcuId = @DcuId, 
                         Type = @Type, Status = @Status, StartUpdateTime = @StartUpdateTime, PhaseType = @PhaseType, Name = @Name, Note = @Note, Address = @Address, 
                         TURatio = @TURatio, TIRatio = @TIRatio, Mutilplier = @Mutilplier, LaunchDay = @LaunchDay, SettlementDate = @SettlementDate, 
                         SettlementUser = @SettlementUser, CreatedUserId = @CreatedUserId, CreatedDate = @CreatedDate, EditedUserId = @EditedUserId, EditedDate = @EditedDate, 
                         IsDeleted = @IsDeleted, Lat = @Lat, Long = @Long, TakeOver = @TakeOver, TakeOverDate = @TakeOverDate, TakeOverUser = @TakeOverUser, 
                         TakeOverBill = @TakeOverBill
WHERE        (Id = @Original_Id); 
SELECT Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, StartUpdateTime, PhaseType, Name, Note, Address, TURatio, TIRatio, Mutilplier, LaunchDay, SettlementDate, SettlementUser, CreatedUserId, CreatedDate, EditedUserId, EditedDate, IsDeleted, Lat, Long, TakeOver, TakeOverDate, TakeOverUser, TakeOverBill FROM MeasurementPoint WHERE (Id = @Id)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="MeasurementPointId" ColumnName="MeasurementPointId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@MeasurementPointId" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeasurementPointId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="MeterTypeId" ColumnName="MeterTypeId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@MeterTypeId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="MeterTypeId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="MeasurementPointGroupId" ColumnName="MeasurementPointGroupId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@MeasurementPointGroupId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="MeasurementPointGroupId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="DcuId" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@DcuId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="Type" ColumnName="Type" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@Type" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="Type" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Status" ColumnName="Status" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(50)" DbType="AnsiString" Direction="Input" ParameterName="@Status" Precision="0" ProviderType="VarChar" Scale="0" Size="50" SourceColumn="Status" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="StartUpdateTime" ColumnName="StartUpdateTime" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@StartUpdateTime" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="StartUpdateTime" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="PhaseType" ColumnName="PhaseType" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@PhaseType" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="PhaseType" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="Name" ColumnName="Name" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nvarchar(250)" DbType="String" Direction="Input" ParameterName="@Name" Precision="0" ProviderType="NVarChar" Scale="0" Size="250" SourceColumn="Name" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Note" ColumnName="Note" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nvarchar(MAX)" DbType="String" Direction="Input" ParameterName="@Note" Precision="0" ProviderType="NVarChar" Scale="0" Size="2147483647" SourceColumn="Note" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Address" ColumnName="Address" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nvarchar(500)" DbType="String" Direction="Input" ParameterName="@Address" Precision="0" ProviderType="NVarChar" Scale="0" Size="500" SourceColumn="Address" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TURatio" ColumnName="TURatio" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="numeric(10, 0)" DbType="Decimal" Direction="Input" ParameterName="@TURatio" Precision="10" ProviderType="Decimal" Scale="0" Size="9" SourceColumn="TURatio" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TIRatio" ColumnName="TIRatio" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="numeric(10, 0)" DbType="Decimal" Direction="Input" ParameterName="@TIRatio" Precision="10" ProviderType="Decimal" Scale="0" Size="9" SourceColumn="TIRatio" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Mutilplier" ColumnName="Mutilplier" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="numeric(10, 0)" DbType="Decimal" Direction="Input" ParameterName="@Mutilplier" Precision="10" ProviderType="Decimal" Scale="0" Size="9" SourceColumn="Mutilplier" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="LaunchDay" ColumnName="LaunchDay" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@LaunchDay" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="LaunchDay" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="SettlementDate" ColumnName="SettlementDate" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@SettlementDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="SettlementDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="SettlementUser" ColumnName="SettlementUser" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nvarchar(250)" DbType="String" Direction="Input" ParameterName="@SettlementUser" Precision="0" ProviderType="NVarChar" Scale="0" Size="250" SourceColumn="SettlementUser" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="CreatedUserId" ColumnName="CreatedUserId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@CreatedUserId" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="CreatedUserId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="CreatedDate" ColumnName="CreatedDate" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@CreatedDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="CreatedDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="EditedUserId" ColumnName="EditedUserId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@EditedUserId" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="EditedUserId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="EditedDate" ColumnName="EditedDate" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@EditedDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="EditedDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="IsDeleted" ColumnName="IsDeleted" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bit" DbType="Boolean" Direction="Input" ParameterName="@IsDeleted" Precision="0" ProviderType="Bit" Scale="0" Size="1" SourceColumn="IsDeleted" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Lat" ColumnName="Lat" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nchar(50)" DbType="String" Direction="Input" ParameterName="@Lat" Precision="0" ProviderType="NChar" Scale="0" Size="50" SourceColumn="Lat" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Long" ColumnName="Long" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nchar(50)" DbType="String" Direction="Input" ParameterName="@Long" Precision="0" ProviderType="NChar" Scale="0" Size="50" SourceColumn="Long" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TakeOver" ColumnName="TakeOver" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@TakeOver" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="TakeOver" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TakeOverDate" ColumnName="TakeOverDate" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@TakeOverDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="TakeOverDate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TakeOverUser" ColumnName="TakeOverUser" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="nvarchar(500)" DbType="String" Direction="Input" ParameterName="@TakeOverUser" Precision="0" ProviderType="NVarChar" Scale="0" Size="500" SourceColumn="TakeOverUser" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="TakeOverBill" ColumnName="TakeOverBill" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@TakeOverBill" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="TakeOverBill" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="Original_Id" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@Original_Id" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Original" />
                      <Parameter AllowDbNull="false" AutogeneratedName="Id" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@Id" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Original" />
                    </Parameters>
                  </DbCommand>
                </UpdateCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="Id" DataSetColumn="Id" />
              <Mapping SourceColumn="MeasurementPointId" DataSetColumn="MeasurementPointId" />
              <Mapping SourceColumn="MeterTypeId" DataSetColumn="MeterTypeId" />
              <Mapping SourceColumn="MeasurementPointGroupId" DataSetColumn="MeasurementPointGroupId" />
              <Mapping SourceColumn="DcuId" DataSetColumn="DcuId" />
              <Mapping SourceColumn="Type" DataSetColumn="Type" />
              <Mapping SourceColumn="Status" DataSetColumn="Status" />
              <Mapping SourceColumn="StartUpdateTime" DataSetColumn="StartUpdateTime" />
              <Mapping SourceColumn="PhaseType" DataSetColumn="PhaseType" />
              <Mapping SourceColumn="Name" DataSetColumn="Name" />
              <Mapping SourceColumn="Note" DataSetColumn="Note" />
              <Mapping SourceColumn="Address" DataSetColumn="Address" />
              <Mapping SourceColumn="TURatio" DataSetColumn="TURatio" />
              <Mapping SourceColumn="TIRatio" DataSetColumn="TIRatio" />
              <Mapping SourceColumn="Mutilplier" DataSetColumn="Mutilplier" />
              <Mapping SourceColumn="LaunchDay" DataSetColumn="LaunchDay" />
              <Mapping SourceColumn="SettlementDate" DataSetColumn="SettlementDate" />
              <Mapping SourceColumn="SettlementUser" DataSetColumn="SettlementUser" />
              <Mapping SourceColumn="CreatedUserId" DataSetColumn="CreatedUserId" />
              <Mapping SourceColumn="CreatedDate" DataSetColumn="CreatedDate" />
              <Mapping SourceColumn="EditedUserId" DataSetColumn="EditedUserId" />
              <Mapping SourceColumn="EditedDate" DataSetColumn="EditedDate" />
              <Mapping SourceColumn="IsDeleted" DataSetColumn="IsDeleted" />
              <Mapping SourceColumn="Lat" DataSetColumn="Lat" />
              <Mapping SourceColumn="Long" DataSetColumn="Long" />
              <Mapping SourceColumn="TakeOver" DataSetColumn="TakeOver" />
              <Mapping SourceColumn="TakeOverDate" DataSetColumn="TakeOverDate" />
              <Mapping SourceColumn="TakeOverUser" DataSetColumn="TakeOverUser" />
              <Mapping SourceColumn="TakeOverBill" DataSetColumn="TakeOverBill" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectName="AmiSystem.dbo.MeasurementPoint" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="FillByDcuId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByDcuId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="FillByDcuId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, PhaseType, Name, Note, Address, Mutilplier, IsDeleted, TakeOverBill
FROM            MeasurementPoint
WHERE        (DcuId = @DcuId)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="DcuId" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@DcuId" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectName="AmiSystem.dbo.MeasurementPoint" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="FillByMeasurementPointCode" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByMeasurementPointCode" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy1" UserSourceName="FillByMeasurementPointCode">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, StartUpdateTime, PhaseType, Name, Note, Address, TURatio, TIRatio, 
                         Mutilplier, LaunchDay, SettlementDate, SettlementUser, CreatedUserId, CreatedDate, EditedUserId, EditedDate, IsDeleted, Lat, Long, TakeOver, TakeOverDate, 
                         TakeOverUser, TakeOverBill
FROM            MeasurementPoint
WHERE        (MeasurementPointId = @measurementPointId)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="measurementPointId" ColumnName="MeasurementPointId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@measurementPointId" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="MeasurementPointId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectName="AmiSystem.dbo.MeasurementPoint" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="FillByMeasurementPointId" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByMeasurementPointId" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy2" UserSourceName="FillByMeasurementPointId">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        Id, MeasurementPointId, MeterTypeId, MeasurementPointGroupId, DcuId, Type, Status, PhaseType, Name, Note, Address, Mutilplier, Lat, Long, TakeOver, 
                         TakeOverDate, TakeOverUser, TakeOverBill, IsDeleted, StartUpdateTime, TURatio, TIRatio, LaunchDay, SettlementDate, SettlementUser, CreatedUserId, 
                         CreatedDate, EditedUserId, EditedDate
FROM            MeasurementPoint
WHERE        (Id = @Id)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="Id" ColumnName="Id" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="Int64" Direction="Input" ParameterName="@Id" Precision="0" ProviderType="BigInt" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="MeasurementPointLostMessageTableAdapter" GeneratorDataComponentClassName="MeasurementPointLostMessageTableAdapter" Name="MeasurementPointLostMessage" UserDataComponentName="MeasurementPointLostMessageTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="GetOperationMessageLostByServerTime" GenerateMethods="Fill" GenerateShortCommands="false" GeneratorSourceName="GetOperationMessageLostByServerTime" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="GetOperationMessageLostByServerTime">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>select 
ct.Note as ContractName,
mpg.Name as MeasurementPointGroup,
dcu.DcuId,
mp.Name as MeasurementPointName, 
dcu.ConnectionStatus, 
dcu.GatewayIp  from 
[dbo].[MeasurementPoint] as mp
left join [dbo].[MeasurementPointGroup] as mpg on mp.MeasurementPointGroupId = mpg.Id
left join DataConcentratorUnit as dcu on mp.DcuId = dcu.Id
left join Contract as ct on mp.TakeOverBill = ct.Id
left join MeasurementPointMeter as mpm on mp.Id = mpm.MeasurementPointId
left join
 ( 
   -- Lấy các điểm đo có dữ liệu vào thời điểm nhập vào
   select distinct MeasurementPointMeterId, ServerTime 
   from [dbo].[Operation3P] 
   where cast(ServerTime as datetime) = cast( @serverTime as datetime)
 ) mplost on mpm.MeasurementPointMeterId = mplost.MeasurementPointMeterId
 where mplost.MeasurementPointMeterId is null
AND (@orgId is null or mpg.OrgId in (
							 SELECT ID
							 FROM [Organization]
							 WHERE ID = @orgId
							 UNION
							 SELECT ID
							 FROM [Organization]
							 WHERE ParentID = @orgId
							 UNION ALL
							 SELECT d.ID
							 FROM [Organization] as d
								INNER JOIN 
								 (  SELECT ID, Name
									FROM [Organization] WHERE ParentID = @orgId
								 )parent 
								   ON d.ParentID = parent.ID
								)
						 )
						 AND (@mpGroupId is null or mp.MeasurementPointGroupId = @mpGroupId)
 and (@dcucode is null or dcu.DcuId like '%'+@dcucode+'%')
 and (@gatewayIp is null or dcu.GatewayIp = @gatewayIp)
 and (@connectionStatus is null or dcu.ConnectionStatus = @connectionStatus)
 and (@contractId is null or ct.Id = @contractId)
 and mp.IsDeleted = 0 and mp.Type = 1</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="dcucode" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@dcucode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="gatewayIp" ColumnName="GatewayIp" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(50)" DbType="AnsiString" Direction="Input" ParameterName="@gatewayIp" Precision="0" ProviderType="VarChar" Scale="0" Size="50" SourceColumn="GatewayIp" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="connectionStatus" ColumnName="ConnectionStatus" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="int" DbType="AnsiString" Direction="Input" ParameterName="@connectionStatus" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="ConnectionStatus" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="contractId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Contract" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@contractId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="serverTime" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="DateTime" Direction="Input" ParameterName="@serverTime" Precision="0" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="orgId" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@orgId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="mpGroupId" ColumnName="MeasurementPointGroupId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@mpGroupId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="MeasurementPointGroupId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="MeasurementPointGroup" DataSetColumn="MeasurementPointGroup" />
              <Mapping SourceColumn="DcuId" DataSetColumn="DcuId" />
              <Mapping SourceColumn="MeasurementPointName" DataSetColumn="MeasurementPointName" />
              <Mapping SourceColumn="ConnectionStatus" DataSetColumn="ConnectionStatus" />
              <Mapping SourceColumn="GatewayIp" DataSetColumn="GatewayIp" />
              <Mapping SourceColumn="ContractName" DataSetColumn="ContractName" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="AmiSystemConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="GetHistoricalMessageLostByServerTime" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="GetHistoricalMessageLostByServerTime" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="GetHistoricalMessageLostByServerTime">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>select 
ct.Note as ContractName,
mpg.Name as MeasurementPointGroup,
dcu.DcuId,
mp.Name as MeasurementPointName, 
dcu.ConnectionStatus, 
dcu.GatewayIp  from 
[dbo].[MeasurementPoint] as mp
left join [dbo].[MeasurementPointGroup] as mpg on mp.MeasurementPointGroupId = mpg.Id
left join DataConcentratorUnit as dcu on mp.DcuId = dcu.Id
left join Contract as ct on mp.TakeOverBill = ct.Id
left join MeasurementPointMeter as mpm on mp.Id = mpm.MeasurementPointId
left join
 ( 
     -- Lấy các điểm đo có dữ liệu vào thời điểm nhập vào
   select distinct MeasurementPointMeterId 
   from [dbo].[Historical3P] 
   where cast(HistoricalTime as datetime) = cast(@historicalTime as datetime)
 ) mplost on mpm.MeasurementPointMeterId = mplost.MeasurementPointMeterId
 where mplost.MeasurementPointMeterId is null
AND (@orgId is null or mpg.OrgId in (
							 SELECT ID
							 FROM [Organization]
							 WHERE ID = @orgId
							 UNION
							 SELECT ID
							 FROM [Organization]
							 WHERE ParentID = @orgId
							 UNION ALL
							 SELECT d.ID
							 FROM [Organization] as d
								INNER JOIN 
								 (  SELECT ID, Name
									FROM [Organization] WHERE ParentID = @orgId
								 )parent 
								   ON d.ParentID = parent.ID
								)
						 )
						 AND (@mpGroupId is null or mp.MeasurementPointGroupId = @mpGroupId)
 and (@dcucode is null or dcu.DcuId like '%'+@dcucode+'%')
 and (@gatewayIp is null or dcu.GatewayIp = @gatewayIp)
 and (@connectionStatus is null or dcu.ConnectionStatus = @connectionStatus)
 and (@contractId is null or ct.Id = @contractId)
 and mp.IsDeleted = 0 and mp.Type = 1</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="dcucode" ColumnName="DcuId" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(20)" DbType="AnsiString" Direction="Input" ParameterName="@dcucode" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="DcuId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="gatewayIp" ColumnName="GatewayIp" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="varchar(50)" DbType="AnsiString" Direction="Input" ParameterName="@gatewayIp" Precision="0" ProviderType="VarChar" Scale="0" Size="50" SourceColumn="GatewayIp" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="connectionStatus" ColumnName="ConnectionStatus" DataSourceName="AmiSystem.dbo.DataConcentratorUnit" DataTypeServer="int" DbType="AnsiString" Direction="Input" ParameterName="@connectionStatus" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="ConnectionStatus" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="contractId" ColumnName="Id" DataSourceName="AmiSystem.dbo.Contract" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@contractId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="Id" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="historicalTime" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="DateTime" Direction="Input" ParameterName="@historicalTime" Precision="0" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="orgId" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@orgId" Precision="0" ProviderType="VarChar" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="mpGroupId" ColumnName="MeasurementPointGroupId" DataSourceName="AmiSystem.dbo.MeasurementPoint" DataTypeServer="bigint" DbType="AnsiString" Direction="Input" ParameterName="@mpGroupId" Precision="0" ProviderType="VarChar" Scale="0" Size="8" SourceColumn="MeasurementPointGroupId" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="MeasurementPointDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="MeasurementPointDataSet" msprop:Generator_UserDSName="MeasurementPointDataSet">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="MeasurementPointInfo" msprop:Generator_TableClassName="MeasurementPointInfoDataTable" msprop:Generator_TableVarName="tableMeasurementPointInfo" msprop:Generator_RowChangedName="MeasurementPointInfoRowChanged" msprop:Generator_TablePropName="MeasurementPointInfo" msprop:Generator_RowDeletingName="MeasurementPointInfoRowDeleting" msprop:Generator_RowChangingName="MeasurementPointInfoRowChanging" msprop:Generator_RowEvHandlerName="MeasurementPointInfoRowChangeEventHandler" msprop:Generator_RowDeletedName="MeasurementPointInfoRowDeleted" msprop:Generator_RowClassName="MeasurementPointInfoRow" msprop:Generator_UserTableName="MeasurementPointInfo" msprop:Generator_RowEvArgName="MeasurementPointInfoRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="MeasurementPointCode" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointCode" msprop:Generator_ColumnPropNameInRow="MeasurementPointCode" msprop:Generator_ColumnPropNameInTable="MeasurementPointCodeColumn" msprop:Generator_UserColumnName="MeasurementPointCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeterStatus" msprop:Generator_ColumnVarNameInTable="columnMeterStatus" msprop:Generator_ColumnPropNameInRow="MeterStatus" msprop:Generator_ColumnPropNameInTable="MeterStatusColumn" msprop:Generator_UserColumnName="MeterStatus" type="xs:int" minOccurs="0" />
              <xs:element name="MeasurementPointMeterStatus" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointMeterStatus" msprop:Generator_ColumnPropNameInRow="MeasurementPointMeterStatus" msprop:Generator_ColumnPropNameInTable="MeasurementPointMeterStatusColumn" msprop:Generator_UserColumnName="MeasurementPointMeterStatus" type="xs:int" minOccurs="0" />
              <xs:element name="MeasurementPointName" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointName" msprop:Generator_ColumnPropNameInRow="MeasurementPointName" msprop:Generator_ColumnPropNameInTable="MeasurementPointNameColumn" msprop:Generator_UserColumnName="MeasurementPointName" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeterType" msprop:Generator_ColumnVarNameInTable="columnMeterType" msprop:Generator_ColumnPropNameInRow="MeterType" msprop:Generator_ColumnPropNameInTable="MeterTypeColumn" msprop:Generator_UserColumnName="MeterType" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeasurementPointGroupName" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointGroupName" msprop:Generator_ColumnPropNameInRow="MeasurementPointGroupName" msprop:Generator_ColumnPropNameInTable="MeasurementPointGroupNameColumn" msprop:Generator_UserColumnName="MeasurementPointGroupName" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="IsDeleted" msprop:Generator_ColumnVarNameInTable="columnIsDeleted" msprop:Generator_ColumnPropNameInRow="IsDeleted" msprop:Generator_ColumnPropNameInTable="IsDeletedColumn" msprop:Generator_UserColumnName="IsDeleted" type="xs:boolean" minOccurs="0" />
              <xs:element name="CreatedDate" msprop:Generator_ColumnVarNameInTable="columnCreatedDate" msprop:Generator_ColumnPropNameInRow="CreatedDate" msprop:Generator_ColumnPropNameInTable="CreatedDateColumn" msprop:Generator_UserColumnName="CreatedDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="DcuCode" msprop:Generator_ColumnVarNameInTable="columnDcuCode" msprop:Generator_ColumnPropNameInRow="DcuCode" msprop:Generator_ColumnPropNameInTable="DcuCodeColumn" msprop:Generator_UserColumnName="DcuCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeterCode" msprop:Generator_ColumnVarNameInTable="columnMeterCode" msprop:Generator_ColumnPropNameInRow="MeterCode" msprop:Generator_ColumnPropNameInTable="MeterCodeColumn" msprop:Generator_UserColumnName="MeterCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeasurementPointAddress" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointAddress" msprop:Generator_ColumnPropNameInRow="MeasurementPointAddress" msprop:Generator_ColumnPropNameInTable="MeasurementPointAddressColumn" msprop:Generator_UserColumnName="MeasurementPointAddress" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="500" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeasurementPointType" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointType" msprop:Generator_ColumnPropNameInRow="MeasurementPointType" msprop:Generator_ColumnPropNameInTable="MeasurementPointTypeColumn" msprop:Generator_UserColumnName="MeasurementPointType" type="xs:int" minOccurs="0" />
              <xs:element name="Contract" msprop:Generator_ColumnVarNameInTable="columnContract" msprop:Generator_ColumnPropNameInRow="Contract" msprop:Generator_ColumnPropNameInTable="ContractColumn" msprop:Generator_UserColumnName="Contract" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2147483647" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="LastOperationTime" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnLastOperationTime" msprop:Generator_ColumnPropNameInRow="LastOperationTime" msprop:Generator_ColumnPropNameInTable="LastOperationTimeColumn" msprop:Generator_UserColumnName="LastOperationTime" type="xs:dateTime" minOccurs="0" />
              <xs:element name="MeasurementPointId" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointId" msprop:Generator_ColumnPropNameInRow="MeasurementPointId" msprop:Generator_ColumnPropNameInTable="MeasurementPointIdColumn" msprop:Generator_UserColumnName="MeasurementPointId" type="xs:long" minOccurs="0" />
              <xs:element name="MeasurementPointMeterId" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointMeterId" msprop:Generator_ColumnPropNameInRow="MeasurementPointMeterId" msprop:Generator_ColumnPropNameInTable="MeasurementPointMeterIdColumn" msprop:Generator_UserColumnName="MeasurementPointMeterId" type="xs:long" minOccurs="0" />
              <xs:element name="EditedDate" msprop:Generator_ColumnVarNameInTable="columnEditedDate" msprop:Generator_ColumnPropNameInRow="EditedDate" msprop:Generator_ColumnPropNameInTable="EditedDateColumn" msprop:Generator_UserColumnName="EditedDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="ConnectionStatus" msprop:Generator_ColumnVarNameInTable="columnConnectionStatus" msprop:Generator_ColumnPropNameInRow="ConnectionStatus" msprop:Generator_ColumnPropNameInTable="ConnectionStatusColumn" msprop:Generator_UserColumnName="ConnectionStatus" type="xs:int" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="MeasurementPoint" msprop:Generator_TableClassName="MeasurementPointDataTable" msprop:Generator_TableVarName="tableMeasurementPoint" msprop:Generator_RowChangedName="MeasurementPointRowChanged" msprop:Generator_TablePropName="MeasurementPoint" msprop:Generator_RowDeletingName="MeasurementPointRowDeleting" msprop:Generator_RowChangingName="MeasurementPointRowChanging" msprop:Generator_RowEvHandlerName="MeasurementPointRowChangeEventHandler" msprop:Generator_RowDeletedName="MeasurementPointRowDeleted" msprop:Generator_RowClassName="MeasurementPointRow" msprop:Generator_UserTableName="MeasurementPoint" msprop:Generator_RowEvArgName="MeasurementPointRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Id" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnId" msprop:Generator_ColumnPropNameInRow="Id" msprop:Generator_ColumnPropNameInTable="IdColumn" msprop:Generator_UserColumnName="Id" type="xs:long" />
              <xs:element name="MeasurementPointId" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointId" msprop:Generator_ColumnPropNameInRow="MeasurementPointId" msprop:Generator_ColumnPropNameInTable="MeasurementPointIdColumn" msprop:Generator_UserColumnName="MeasurementPointId" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeterTypeId" msprop:Generator_ColumnVarNameInTable="columnMeterTypeId" msprop:Generator_ColumnPropNameInRow="MeterTypeId" msprop:Generator_ColumnPropNameInTable="MeterTypeIdColumn" msprop:Generator_UserColumnName="MeterTypeId" type="xs:long" minOccurs="0" />
              <xs:element name="MeasurementPointGroupId" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointGroupId" msprop:Generator_ColumnPropNameInRow="MeasurementPointGroupId" msprop:Generator_ColumnPropNameInTable="MeasurementPointGroupIdColumn" msprop:Generator_UserColumnName="MeasurementPointGroupId" type="xs:long" />
              <xs:element name="DcuId" msprop:Generator_ColumnVarNameInTable="columnDcuId" msprop:Generator_ColumnPropNameInRow="DcuId" msprop:Generator_ColumnPropNameInTable="DcuIdColumn" msprop:Generator_UserColumnName="DcuId" type="xs:long" minOccurs="0" />
              <xs:element name="Type" msprop:Generator_ColumnVarNameInTable="columnType" msprop:Generator_ColumnPropNameInRow="Type" msprop:Generator_ColumnPropNameInTable="TypeColumn" msprop:Generator_UserColumnName="Type" type="xs:int" />
              <xs:element name="Status" msprop:Generator_ColumnVarNameInTable="columnStatus" msprop:Generator_ColumnPropNameInRow="Status" msprop:Generator_ColumnPropNameInTable="StatusColumn" msprop:Generator_UserColumnName="Status" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="StartUpdateTime" msprop:Generator_ColumnVarNameInTable="columnStartUpdateTime" msprop:Generator_ColumnPropNameInRow="StartUpdateTime" msprop:Generator_ColumnPropNameInTable="StartUpdateTimeColumn" msprop:Generator_UserColumnName="StartUpdateTime" type="xs:dateTime" minOccurs="0" />
              <xs:element name="PhaseType" msprop:Generator_ColumnVarNameInTable="columnPhaseType" msprop:Generator_ColumnPropNameInRow="PhaseType" msprop:Generator_ColumnPropNameInTable="PhaseTypeColumn" msprop:Generator_UserColumnName="PhaseType" type="xs:int" />
              <xs:element name="Name" msprop:Generator_ColumnVarNameInTable="columnName" msprop:Generator_ColumnPropNameInRow="Name" msprop:Generator_ColumnPropNameInTable="NameColumn" msprop:Generator_UserColumnName="Name">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Note" msprop:Generator_ColumnVarNameInTable="columnNote" msprop:Generator_ColumnPropNameInRow="Note" msprop:Generator_ColumnPropNameInTable="NoteColumn" msprop:Generator_UserColumnName="Note" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2147483647" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Address" msprop:Generator_ColumnVarNameInTable="columnAddress" msprop:Generator_ColumnPropNameInRow="Address" msprop:Generator_ColumnPropNameInTable="AddressColumn" msprop:Generator_UserColumnName="Address" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="500" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TURatio" msprop:Generator_ColumnVarNameInTable="columnTURatio" msprop:Generator_ColumnPropNameInRow="TURatio" msprop:Generator_ColumnPropNameInTable="TURatioColumn" msprop:Generator_UserColumnName="TURatio" type="xs:decimal" minOccurs="0" />
              <xs:element name="TIRatio" msprop:Generator_ColumnVarNameInTable="columnTIRatio" msprop:Generator_ColumnPropNameInRow="TIRatio" msprop:Generator_ColumnPropNameInTable="TIRatioColumn" msprop:Generator_UserColumnName="TIRatio" type="xs:decimal" minOccurs="0" />
              <xs:element name="Mutilplier" msprop:Generator_ColumnVarNameInTable="columnMutilplier" msprop:Generator_ColumnPropNameInRow="Mutilplier" msprop:Generator_ColumnPropNameInTable="MutilplierColumn" msprop:Generator_UserColumnName="Mutilplier" type="xs:decimal" minOccurs="0" />
              <xs:element name="LaunchDay" msprop:Generator_ColumnVarNameInTable="columnLaunchDay" msprop:Generator_ColumnPropNameInRow="LaunchDay" msprop:Generator_ColumnPropNameInTable="LaunchDayColumn" msprop:Generator_UserColumnName="LaunchDay" type="xs:dateTime" minOccurs="0" />
              <xs:element name="SettlementDate" msprop:Generator_ColumnVarNameInTable="columnSettlementDate" msprop:Generator_ColumnPropNameInRow="SettlementDate" msprop:Generator_ColumnPropNameInTable="SettlementDateColumn" msprop:Generator_UserColumnName="SettlementDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="SettlementUser" msprop:Generator_ColumnVarNameInTable="columnSettlementUser" msprop:Generator_ColumnPropNameInRow="SettlementUser" msprop:Generator_ColumnPropNameInTable="SettlementUserColumn" msprop:Generator_UserColumnName="SettlementUser" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CreatedUserId" msprop:Generator_ColumnVarNameInTable="columnCreatedUserId" msprop:Generator_ColumnPropNameInRow="CreatedUserId" msprop:Generator_ColumnPropNameInTable="CreatedUserIdColumn" msprop:Generator_UserColumnName="CreatedUserId" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CreatedDate" msprop:Generator_ColumnVarNameInTable="columnCreatedDate" msprop:Generator_ColumnPropNameInRow="CreatedDate" msprop:Generator_ColumnPropNameInTable="CreatedDateColumn" msprop:Generator_UserColumnName="CreatedDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="EditedUserId" msprop:Generator_ColumnVarNameInTable="columnEditedUserId" msprop:Generator_ColumnPropNameInRow="EditedUserId" msprop:Generator_ColumnPropNameInTable="EditedUserIdColumn" msprop:Generator_UserColumnName="EditedUserId" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="EditedDate" msprop:Generator_ColumnVarNameInTable="columnEditedDate" msprop:Generator_ColumnPropNameInRow="EditedDate" msprop:Generator_ColumnPropNameInTable="EditedDateColumn" msprop:Generator_UserColumnName="EditedDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="IsDeleted" msprop:Generator_ColumnVarNameInTable="columnIsDeleted" msprop:Generator_ColumnPropNameInRow="IsDeleted" msprop:Generator_ColumnPropNameInTable="IsDeletedColumn" msprop:Generator_UserColumnName="IsDeleted" type="xs:boolean" />
              <xs:element name="Lat" msprop:Generator_ColumnVarNameInTable="columnLat" msprop:Generator_ColumnPropNameInRow="Lat" msprop:Generator_ColumnPropNameInTable="LatColumn" msprop:Generator_UserColumnName="Lat" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Long" msprop:Generator_ColumnVarNameInTable="columnLong" msprop:Generator_ColumnPropNameInRow="Long" msprop:Generator_ColumnPropNameInTable="LongColumn" msprop:Generator_UserColumnName="Long" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TakeOver" msprop:Generator_ColumnVarNameInTable="columnTakeOver" msprop:Generator_ColumnPropNameInRow="TakeOver" msprop:Generator_ColumnPropNameInTable="TakeOverColumn" msprop:Generator_UserColumnName="TakeOver" type="xs:int" minOccurs="0" />
              <xs:element name="TakeOverDate" msprop:Generator_ColumnVarNameInTable="columnTakeOverDate" msprop:Generator_ColumnPropNameInRow="TakeOverDate" msprop:Generator_ColumnPropNameInTable="TakeOverDateColumn" msprop:Generator_UserColumnName="TakeOverDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="TakeOverUser" msprop:Generator_ColumnVarNameInTable="columnTakeOverUser" msprop:Generator_ColumnPropNameInRow="TakeOverUser" msprop:Generator_ColumnPropNameInTable="TakeOverUserColumn" msprop:Generator_UserColumnName="TakeOverUser" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="500" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TakeOverBill" msprop:Generator_ColumnVarNameInTable="columnTakeOverBill" msprop:Generator_ColumnPropNameInRow="TakeOverBill" msprop:Generator_ColumnPropNameInTable="TakeOverBillColumn" msprop:Generator_UserColumnName="TakeOverBill" type="xs:long" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="MeasurementPointLostMessage" msprop:Generator_TableClassName="MeasurementPointLostMessageDataTable" msprop:Generator_TableVarName="tableMeasurementPointLostMessage" msprop:Generator_TablePropName="MeasurementPointLostMessage" msprop:Generator_RowDeletingName="MeasurementPointLostMessageRowDeleting" msprop:Generator_RowChangingName="MeasurementPointLostMessageRowChanging" msprop:Generator_RowEvHandlerName="MeasurementPointLostMessageRowChangeEventHandler" msprop:Generator_RowDeletedName="MeasurementPointLostMessageRowDeleted" msprop:Generator_UserTableName="MeasurementPointLostMessage" msprop:Generator_RowChangedName="MeasurementPointLostMessageRowChanged" msprop:Generator_RowEvArgName="MeasurementPointLostMessageRowChangeEvent" msprop:Generator_RowClassName="MeasurementPointLostMessageRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="MeasurementPointGroup" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointGroup" msprop:Generator_ColumnPropNameInRow="MeasurementPointGroup" msprop:Generator_ColumnPropNameInTable="MeasurementPointGroupColumn" msprop:Generator_UserColumnName="MeasurementPointGroup" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="DcuId" msprop:Generator_ColumnVarNameInTable="columnDcuId" msprop:Generator_ColumnPropNameInRow="DcuId" msprop:Generator_ColumnPropNameInTable="DcuIdColumn" msprop:Generator_UserColumnName="DcuId" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MeasurementPointName" msprop:Generator_ColumnVarNameInTable="columnMeasurementPointName" msprop:Generator_ColumnPropNameInRow="MeasurementPointName" msprop:Generator_ColumnPropNameInTable="MeasurementPointNameColumn" msprop:Generator_UserColumnName="MeasurementPointName">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="250" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="ConnectionStatus" msprop:Generator_ColumnVarNameInTable="columnConnectionStatus" msprop:Generator_ColumnPropNameInRow="ConnectionStatus" msprop:Generator_ColumnPropNameInTable="ConnectionStatusColumn" msprop:Generator_UserColumnName="ConnectionStatus" type="xs:int" minOccurs="0" />
              <xs:element name="GatewayIp" msprop:Generator_ColumnVarNameInTable="columnGatewayIp" msprop:Generator_ColumnPropNameInRow="GatewayIp" msprop:Generator_ColumnPropNameInTable="GatewayIpColumn" msprop:Generator_UserColumnName="GatewayIp" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="ContractName" msprop:Generator_ColumnVarNameInTable="columnContractName" msprop:Generator_ColumnPropNameInRow="ContractName" msprop:Generator_ColumnPropNameInTable="ContractNameColumn" msprop:Generator_UserColumnName="ContractName" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2147483647" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1" msdata:PrimaryKey="true">
      <xs:selector xpath=".//mstns:MeasurementPoint" />
      <xs:field xpath="mstns:Id" />
    </xs:unique>
  </xs:element>
</xs:schema>